<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert files to use datasets versions of penguins and penguins_raw — convert_files • basepenguins</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Figtree-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Outfit-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert files to use datasets versions of penguins and penguins_raw — convert_files"><meta name="description" content="These functions convert files that use the
palmerpenguins package
to use the versions of penguins and penguins_raw included in the datasets
package in R 4.5.0. They removes calls to library(palmerpenguins) and make
necessary changes to some variable names (see Details section below)."><meta property="og:description" content="These functions convert files that use the
palmerpenguins package
to use the versions of penguins and penguins_raw included in the datasets
package in R 4.5.0. They removes calls to library(palmerpenguins) and make
necessary changes to some variable names (see Details section below)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">basepenguins</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/basepenguins.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EllaKaye/basepenguins/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert files to use datasets versions of penguins and penguins_raw</h1>
      <small class="dont-index">Source: <a href="https://github.com/EllaKaye/basepenguins/blob/main/R/convert.R" class="external-link"><code>R/convert.R</code></a></small>
      <div class="d-none name"><code>convert_files.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions convert files that use the
<a href="https://CRAN.R-project.org/package=palmerpenguins" class="external-link">palmerpenguins</a> package
to use the versions of <code>penguins</code> and <code>penguins_raw</code> included in the datasets
package in R 4.5.0. They removes calls to <code><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">library(palmerpenguins)</a></code> and make
necessary changes to some variable names (see Details section below).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">convert_files</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"r"</span>, <span class="st">"qmd"</span>, <span class="st">"rmd"</span>, <span class="st">"Rmd"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">convert_files_inplace</span><span class="op">(</span><span class="va">input</span>, extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"r"</span>, <span class="st">"qmd"</span>, <span class="st">"rmd"</span>, <span class="st">"Rmd"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">convert_dir</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"r"</span>, <span class="st">"qmd"</span>, <span class="st">"rmd"</span>, <span class="st">"Rmd"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">convert_dir_inplace</span><span class="op">(</span><span class="va">input</span>, extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"r"</span>, <span class="st">"qmd"</span>, <span class="st">"rmd"</span>, <span class="st">"Rmd"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input">input<a class="anchor" aria-label="anchor" href="#arg-input"></a></dt>
<dd><p>For <code>convert_files()</code> and <code>convert_files_inplace()</code>:
A character vector of file paths to convert.
For <code>convert_dir()</code> and <code>convert_dir_inplace()</code>:
A string with a path to a directory of files to convert.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>For <code>convert_files()</code>:
A character vector of output file paths, or NULL to modify files in place.
If provided, must be the same length as <code>input</code>.
For <code>convert_dir()</code>:
A string with the output directory,
or <code>NULL</code> to modify the files in the directory in place.</p></dd>


<dt id="arg-extensions">extensions<a class="anchor" aria-label="anchor" href="#arg-extensions"></a></dt>
<dd><p>A character vector of file extensions to process,
defaults to R scripts and R Markdown and Quarto documents.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An invisible list with two components:</p><ul><li><p><code>changed</code>: A named character vector of output paths for files that
were modified, with input paths as the names.</p></li>
<li><p><code>not_changed</code>: A named character vector of output paths for files
that were not modified, with input paths as names. Files are not changed
if they do not contain references to palmerpenguins (i.e. the patterns)
listed in the Details section, or if they do not have one of the
specified <code>extensions</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Files are converted by:</p><ul><li><p>Replacing <code><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">library(palmerpenguins)</a></code> with <code>""</code></p></li>
<li><p>Replacing variable names:</p><ul><li><p><code>bill_length_mm</code> -&gt; <code>bill_len</code></p></li>
<li><p><code>bill_depth_mm</code> -&gt; <code>bill_dep</code></p></li>
<li><p><code>flipper_length_mm</code> -&gt; <code>flipper_len</code></p></li>
<li><p><code>body_mass_g</code> -&gt; <code>body_mass</code></p></li>
</ul></li>
<li><p>Replacing <code>ends_with("_mm")</code> with <code>starts_with("flipper_"), starts_with(bill_)</code></p></li>
</ul><p>Non-convertible files (those without the specified extensions) are copied to
the output location if <code>output</code> is provided, but are not modified.</p>
<p>If the <code>output</code> files or directory do not (yet) exist, they will be created
(recursively if necessary).</p>
<p>Replacing <code>ends_with("_mm")</code> with <code>starts_with("flipper_"), starts_with(bill_)</code>
ensures that modified R code will always run. <code>starts_with("flipper_")</code> isn't
intuitively necessary, as there is only one variable starting with "flipper_",
in <code>penguins</code>, but this code will not error inside <code>dplyr::(select)</code>, even if
<code>flipper_len</code> isn't in the data frame (trying to select <code>flipper_len</code>
directly will cause an error if that column isn't in the data frame).
In an educational context, we suggest manually editing the converted files to
replace <code>starts_with("flipper_")</code> to <code>flipper_len</code> if appropriate.
To facilitate this, the functions documented here produce a message
indicating the files and line numbers where the <code>ends_with("_mm")</code>
substitution was made.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="penguins_examples.html">penguins_examples()</a></code>, <code><a href="penguins_examples.html">penguins_examples_dir()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Single file</span></span></span>
<span class="r-in"><span><span class="va">penguin_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="penguins_examples.html">penguins_examples</a></span><span class="op">(</span><span class="st">"penguins.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">convert_files</span><span class="op">(</span><span class="va">penguin_file</span>, <span class="va">output_file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - In /tmp/Rtmpy3g0Qf/file1c29773e94fc.R, ends_with("_mm") replaced on line 7 - please check that the subsitution is appropriate.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Please check the changed output files.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">output_file</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span> <span class="co"># view changes</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> library(ggplot2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> library(dplyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # exploring scatterplots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> penguins |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   select(body_mass, starts_with("flipper_"), starts_with("bill_")) |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   glimpse()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # Scatterplot example: penguin flipper length versus body mass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ggplot(data = penguins, aes(x = flipper_len, y = body_mass)) +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   geom_point(aes(color = species, shape = species), size = 2) +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   scale_color_manual(values = c("darkorange", "darkorchid", "cyan4"))</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert multiple files to new locations</span></span></span>
<span class="r-in"><span><span class="va">input_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="penguins_examples.html">penguins_examples</a></span><span class="op">(</span><span class="st">"penguins.R"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="penguins_examples.html">penguins_examples</a></span><span class="op">(</span><span class="st">"analysis/penguins.qmd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".R"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".qmd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">convert_files</span><span class="op">(</span><span class="va">input_files</span>, <span class="va">output_files</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - In /tmp/Rtmpy3g0Qf/file1c2976137746.R, ends_with("_mm") replaced on line 7 - please check that the subsitution is appropriate.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Please check the changed output files.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Remember to re-knit or re-render and changed Rmarkdown or Quarto documents.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert all files in a directory</span></span></span>
<span class="r-in"><span><span class="va">penguins_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="penguins_examples.html">penguins_examples_dir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">convert_dir</span><span class="op">(</span><span class="va">penguins_dir</span>, <span class="va">output_dir</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - In /tmp/Rtmpy3g0Qf/file1c29d0a053b/penguins.R, ends_with("_mm") replaced on line 7 - please check that the subsitution is appropriate.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Please check the changed output files.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Remember to re-knit or re-render and changed Rmarkdown or Quarto documents.</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">changed</span> <span class="co"># see which files have changed</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /home/runner/work/_temp/Library/basepenguins/extdata/analysis/penguins.qmd </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    "/tmp/Rtmpy3g0Qf/file1c29d0a053b/analysis/penguins.qmd" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            /home/runner/work/_temp/Library/basepenguins/extdata/penguins.R </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               "/tmp/Rtmpy3g0Qf/file1c29d0a053b/penguins.R" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Modify files in-place</span></span></span>
<span class="r-in"><span><span class="va">input_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="penguins_examples.html">penguins_examples</a></span><span class="op">(</span><span class="st">"penguins.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Copy file so don't overwrite example provided by package</span></span></span>
<span class="r-in"><span><span class="va">copy_path</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">input_file</span>, <span class="va">copy_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">convert_files_inplace</span><span class="op">(</span><span class="va">copy_path</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - In /tmp/Rtmpy3g0Qf/file1c293e4844e2.R, ends_with("_mm") replaced on line 7 - please check that the subsitution is appropriate.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Please check the changed output files.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># don't overwrite the example files provided by the package</span></span></span>
<span class="r-in"><span>  <span class="co"># Get all example files</span></span></span>
<span class="r-in"><span>  <span class="va">input_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="penguins_examples.html">penguins_examples</a></span><span class="op">(</span>recursive <span class="op">=</span> <span class="cn">TRUE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Convert them in place</span></span></span>
<span class="r-in"><span>  <span class="fu">convert_files_inplace</span><span class="op">(</span><span class="va">input_files</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - In /home/runner/work/_temp/Library/basepenguins/extdata/penguins.R, ends_with("_mm") replaced on line 7 - please check that the subsitution is appropriate.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Please check the changed output files.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Remember to re-knit or re-render and changed Rmarkdown or Quarto documents.</span>
<span class="r-in"><span> <span class="co"># \dontrun{}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ellakaye.co.uk" class="external-link">Ella Kaye</a>, <a href="https://www.heatherturner.net" class="external-link">Heather Turner</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

